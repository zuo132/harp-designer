(this["webpackJsonpharp-designer"]=this["webpackJsonpharp-designer"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(28),c=n.n(a),i=n(13),s=n(26),o=n(62),u=n(80),l=n(21),d=n(2),j=n(15),b=function(e,t){return e*t+500},h=function(e,t){return 600-e*t};function O(e,t,n,r){var a=1-e;return a*a*t+2*a*e*n+e*e*r}var m,f,g,p,x,y,v,k,T,S,N,P,D,A,C,M,E,w,L=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.14,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=a||Math.pow(n/2,2)*Math.PI*r*1e3;return Math.pow(2*t*e,2)*c/9.807},_=function(e){return 2.54*e/100},q=function(e){var t,n;return t=3===e.length?e.charAt(2):e.charAt(1),n=(n=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"].indexOf(e.slice(0,-1)))<3?n+12+12*(t-1)+1:n+12*(t-1)+1,440*Math.pow(2,(n-49)/12)},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"C2",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"C Major",r=["C","D","E","F","G","A","B"],a=["C","D","D#","F","G","G#","A#"],c=["C","C#","D#","F","G","G#","A#"],i="C Major"===n?r:"E Flat Major"===n?a:c,s=t.charAt(0),o=parseInt(t.charAt(t.length-1)),u=s.charCodeAt(0)-"C".charCodeAt(0),l=e.map((function(e,t){var n=i[(t+u)%7]+(o+Math.floor((t+u)/7));return Object(d.a)(Object(d.a)({},e),{},{note:n,frequency:q(n)})}));return l},F=function(e,t,n){return n/(e*t)},B=function(e){return Math.pow(e/1e3/2,2)*Math.PI},G=function(e,t){return e/1e3*(t/1e3)},U=I([{id:"1",frequency:1864.655,length:80,tension:6.661,diameter:.025},{id:"2",frequency:1760,length:100,tension:9.272,diameter:.025},{id:"3",frequency:1567.982,length:123,tension:11.134,diameter:.025},{id:"4",frequency:1396.913,length:145,tension:12.281,diameter:.025},{id:"5",frequency:1318.51,length:165,tension:14.168,diameter:.025},{id:"6",frequency:1174.659,length:175,tension:12.649,diameter:.025},{id:"7",frequency:1046.502,length:190,tension:11.835,diameter:.025},{id:"8",frequency:932.328,length:225,tension:16.524,diameter:.028},{id:"9",frequency:880,length:240,tension:16.749,diameter:.028},{id:"10",frequency:783.991,length:260,tension:15.602,diameter:.028},{id:"11",frequency:698.456,length:275,tension:13.853,diameter:.028},{id:"12",frequency:659.255,length:295,tension:18.55,diameter:.032},{id:"13",frequency:587.33,length:315,tension:16.787,diameter:.032},{id:"14",frequency:523.251,length:330,tension:14.623,diameter:.032},{id:"15",frequency:466.164,length:348,tension:12.907,diameter:.032},{id:"16",frequency:440,length:370,tension:12.999,diameter:.032},{id:"17",frequency:391.995,length:390,tension:14.507,diameter:.036},{id:"18",frequency:349.228,length:415,tension:13.038,diameter:.036},{id:"19",frequency:329.628,length:445,tension:13.355,diameter:.036},{id:"20",frequency:293.665,length:477,tension:15.036,diameter:.04},{id:"21",frequency:261.626,length:510,tension:23.057,diameter:.052},{id:"22",frequency:233.082,length:545,tension:20.898,diameter:.052},{id:"23",frequency:220,length:585,tension:21.451,diameter:.052},{id:"24",frequency:195.998,length:628,tension:19.621,diameter:.052},{id:"25",frequency:174.614,length:675,tension:17.991,diameter:.052},{id:"26",frequency:164.814,length:728,tension:18.644,diameter:.052},{id:"27",frequency:146.832,length:785,tension:19.955,diameter:.056},{id:"28",frequency:130.813,length:850,tension:21.317,diameter:.06},{id:"29",frequency:116.541,length:900,tension:22.262,diameter:.065},{id:"30",frequency:110,length:950,tension:30.21,diameter:.076},{id:"31",frequency:97.999,length:1e3,tension:29.438,diameter:.08},{id:"32",frequency:87.307,length:1045,tension:28.804,diameter:.085},{id:"33",frequency:82.407,length:1090,tension:32,diameter:.091},{id:"34",frequency:73.416,length:1130,tension:30.378,diameter:.096},{id:"35",frequency:65.406,length:1168,tension:27.952,diameter:.1},{id:"36",frequency:58.27,length:1205,tension:23.613,diameter:.1}].reverse()).map((function(e,t,n){var r=n.length-t-1,a=.71*Math.pow(r,2)+7*r+100;return Object(d.a)(Object(d.a)({},e),{},{length:a,diameter:1e3*_(e.diameter),tension:L(a/1e3,e.frequency,_(e.diameter)),materialDensity:1.14,linearMassDensity:0})})),R={strings:U,defaultStringLengths:U.map((function(e){return e.length})),selectedString:null,stringSpacing:10,materialDensity:1.14,tuning:"C Major",stringNumber:36,lowestNote:"C2",totalLoad:U.reduce((function(e,t){return e+t.tension}),0)},W=Object(j.b)(R,{SELECT_STRING:function(e,t){var n=t.payload,r=e.strings.find((function(e){return e.id===n.stringId}));return Object(d.a)(Object(d.a)({},e),{},{selectedString:r})},UPDATE_STRING:function(e,t){var n=t.payload,r=e.strings.find((function(e){return e.id===n.stringId}));Object.keys(n.params).forEach((function(e){r[e]=n.params[e]})),e.selectedString=r,e.totalLoad=e.strings.reduce((function(e,t){return e+t.tension}),0)},UPDATE_STRING_MATERIAL_DENSITY:function(e,t){var n=t.payload;e.strings.forEach((function(e){e.tension=L(e.length/1e3,e.frequency,e.diameter/1e3,n.density),e.materialDensity=n.density})),e.materialDensity=n.density,e.selectedString&&(e.selectedString=e.strings.find((function(t){return t.id===e.selectedString.id}))),e.totalLoad=e.strings.reduce((function(e,t){return e+t.tension}),0)},UPDATE_TUNING:function(e,t){var n=t.payload;e.strings=I(e.strings,e.lowestNote,n.tuning),e.strings.forEach((function(e){e.tension=L(e.length/1e3,e.frequency,e.diameter/1e3,e.materialDensity,e.materialDensity<=0?0:e.linearMassDensity)})),e.tuning=n.tuning,e.selectedString&&(e.selectedString=e.strings.find((function(t){return t.id===e.selectedString.id}))),e.totalLoad=e.strings.reduce((function(e,t){return e+t.tension}),0)},UPDATE_STRING_NUMBER:function(e,t){var n=t.payload,r=e.strings,a=[],c=n.stringNumber-e.stringNumber;if(c>0){for(var i=[],s=0;s<c;s++){var o=e.strings.length+s,u={id:o+1+"",length:.71*Math.pow(o,2)+7*o+100,diameter:e.strings[0].diameter,materialDensity:e.materialDensity};i.push(u)}r=(r=I([].concat(Object(l.a)(i.reverse()),Object(l.a)(e.strings)),e.lowestNote,e.tuning)).map((function(e){var t=L(e.length/1e3,e.frequency,e.diameter/1e3,e.materialDensity,e.materialDensity<=0?0:e.linearMassDensity);return Object(d.a)(Object(d.a)({},e),{},{tension:t})})),a=[].concat(Object(l.a)(i.map((function(e){return e.length}))),Object(l.a)(e.defaultStringLengths))}else c<0&&(r=I(e.strings.slice(Math.abs(c)),e.lowestNote,e.tuning).map((function(e){var t=L(e.length/1e3,e.frequency,e.diameter/1e3,e.materialDensity,e.materialDensity<=0?0:e.linearMassDensity);return Object(d.a)(Object(d.a)({},e),{},{tension:t})})),a=e.defaultStringLengths.slice(Math.abs(c)));return Object(d.a)(Object(d.a)({},e),{},{stringNumber:n.stringNumber,strings:r,defaultStringLengths:a,totalLoad:e.strings.reduce((function(e,t){return e+t.tension}),0),selectedString:null})},UPDATE_LOWEST_NOTE:function(e,t){var n=t.payload,r=I(e.strings,n.lowestNote,e.tuning);return r=r.map((function(e){var t=L(e.length/1e3,e.frequency,e.diameter/1e3,e.materialDensity,e.materialDensity<=0?0:e.linearMassDensity);return Object(d.a)(Object(d.a)({},e),{},{tension:t})})),Object(d.a)(Object(d.a)({},e),{},{lowestNote:n.lowestNote,strings:r,totalLoad:r.reduce((function(e,t){return e+t.tension}),0),selectedString:r.find((function(t){return t.id===e.selectedString.id}))})}}),H=Object(j.b)({angle:50,control:null,stringBandThickness:20,length:0},{UPDATE_SOUNDBOARD_ANGLE:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{angle:n.angle})},UPDATE_CONTROL_POSITION:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{control:n.position})},UPDATE_STRING_BAND_THICKNESS:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{stringBandThickness:n.thickness})},UPDATE_SOUNDBOARD_LENGTH:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{length:n.length})}}),J=Object(j.b)({shape:"Straight",pillarDiameter:30,pillarWidth:40,pillarThickness:20,neckJointWidth:2},{UPDATE_PILLAR_SHAPE:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{shape:n.shape})},UPDATE_PILLAR_DIAMETER:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{pillarDiameter:n.diameter})},UPDATE_PILLAR_WIDTH:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{pillarWidth:n.width})},UPDATE_PILLAR_THICKNESS:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{pillarThickness:n.thickness})},UPDATE_NECK_JOINT_WIDTH:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{neckJointWidth:n.width})}}),K=Object(j.b)({neckThickness:40,tuningPinLength:20,frontNeckThickness:15,backNeckThickness:15,frontNeckTuningPostLength:10,backNeckTuningPostLength:10,neckStyle:"Standard"},{UPDATE_NECK_THICKNESS:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{neckThickness:n.thickness})},UPDATE_TUNING_PIN_LENGTH:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{tuningPinLength:n.length})},UPDATE_PARAGUAYAN_PARAMS:function(e,t){var n=t.payload;Object.keys(n.params).forEach((function(t){e[t]=n.params[t]}))},UPDATE_NECK_STYLE:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{neckStyle:n.style})}}),Y=Object(j.b)({backgroundColor:"burlywood"},{UPDATE_BACKGROUND_COLOR:function(e,t){var n=t.payload;return Object(d.a)(Object(d.a)({},e),{},{backgroundColor:n.color})}}),z=Object(s.combineReducers)({string:W,soundboard:H,pillar:J,neck:K,settings:Y}),X=[o.a],Q=Object(s.createStore)(z,{},Object(u.composeWithDevTools)(s.applyMiddleware.apply(void 0,X))),V=n(17),Z=n(116),$=n(113),ee=n(115),te=n(114),ne=n(81),re=n(18),ae=n(4),ce=n(117),ie=n(82),se=n(14),oe=n.n(se),ue=n(19),le=n(1),de=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.string})),n=t.strings,a=t.stringNumber,c=t.lowestNote,s=0;n.forEach((function(e){s+=e.tension}));var o=Object(r.useState)(a),u=Object(ae.a)(o,2),l=u[0],d=u[1],b=Object(r.useState)(c),h=Object(ae.a)(b,2),O=h[0],m=h[1];return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h5",{children:"Overview"}),Object(le.jsxs)("span",{children:["Total Tension: ",Object(le.jsx)("b",{children:s.toFixed(2)})," kg"]}),Object(le.jsx)("p",{}),Object(le.jsxs)(ce.a,{onSubmit:function(t){t.preventDefault(),O!==c&&e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_LOWEST_NOTE")({lowestNote:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(O)),parseInt(l)!==a&&e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_STRING_NUMBER")({stringNumber:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(parseInt(l)))},children:[Object(le.jsxs)(je,{children:[Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Number of Strings"}),Object(le.jsx)(ce.a.Control,{type:"number",value:l,onChange:function(e){return d(e.target.value)}})]}),Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Lowest Note"}),Object(le.jsx)(ce.a.Control,{type:"text",value:O,onChange:function(e){return m(e.target.value)}})]})]}),Object(le.jsx)(ie.a,{className:"btn-sm",type:"submit",variant:"secondary",children:"Apply"})]})]})},je=re.a.div(m||(m=Object(V.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),be=n(111),he=function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_CONTROL_POSITION")({position:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Oe=function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_SOUNDBOARD_LENGTH")({length:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},me=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.string})).totalLoad,n=Object(i.c)((function(e){return e.soundboard})),a=n.angle,c=n.stringBandThickness,s=n.length,o=Object(r.useState)(a),u=Object(ae.a)(o,2),l=u[0],d=u[1],b=Object(r.useState)(c),h=Object(ae.a)(b,2),O=h[0],m=h[1];return Object(le.jsxs)(ce.a,{onSubmit:function(t){var n;t.preventDefault(),l&&l!==a&&e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_SOUNDBOARD_ANGLE")({angle:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(parseInt(l))),O&&O!==c&&e((n=O,function(){var e=Object(ue.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Object(j.a)("UPDATE_STRING_BAND_THICKNESS")({thickness:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(le.jsx)("h5",{children:"Soundboard"}),Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Soundboard Angle"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:l,onChange:function(e){return d(e.target.value)}}),Object(le.jsx)(fe,{children:"\xb0"})]})]}),Object(le.jsxs)("p",{children:["Tensile Stress:"," ",Object(le.jsx)("b",{children:(F(s/1e3,c/1e3,.5*t*9.807)/1e6).toFixed(6)})," ","MPa"]}),Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"String Band Thickness"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:O,onChange:function(e){return m(e.target.value)}}),Object(le.jsx)(fe,{children:"mm"})]})]}),Object(le.jsx)(ie.a,{className:"btn-sm",type:"submit",variant:"secondary",children:"Apply"})]})},fe=Object(re.a)(be.a.Text)(f||(f=Object(V.a)(["\n  min-width: 70px;\n  display: inline-block;\n  text-align: center;\n"]))),ge=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.string})).totalLoad,n=Object(i.c)((function(e){return e.pillar})),a=n.shape,c=n.pillarDiameter,s=n.pillarWidth,o=n.pillarThickness,u=n.neckJointWidth,l=Object(r.useState)(c),d=Object(ae.a)(l,2),b=d[0],h=d[1],O=Object(r.useState)(s),m=Object(ae.a)(O,2),f=m[0],g=m[1],p=Object(r.useState)(o),x=Object(ae.a)(p,2),y=x[0],v=x[1],k=Object(r.useState)(u),T=Object(ae.a)(k,2),S=T[0],N=T[1],P=function(t){e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_PILLAR_SHAPE")({shape:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))};return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h5",{children:"Pillar"}),Object(le.jsx)(pe,{variant:"Straight"===a?"primary":"secondary",onClick:function(){return P("Straight")},children:"Straight"}),Object(le.jsx)(pe,{variant:"D Shape"===a?"primary":"secondary",onClick:function(){return P("D Shape")},children:"D Shape"}),Object(le.jsxs)("p",{children:["Compresive Stress:"," ",Object(le.jsx)("b",{children:(.6*t*9.807/("Straight"===a?B(c):G(s,o))/1e6).toFixed(6)})," MPa"]}),"Straight"===a?Object(le.jsxs)(ce.a,{onSubmit:function(t){t.preventDefault(),e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_PILLAR_DIAMETER")({diameter:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(b))},children:[Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Pillar Diameter"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:b,onChange:function(e){return h(e.target.value)}}),Object(le.jsx)(xe,{children:"mm"})]})]}),Object(le.jsx)(ie.a,{className:"btn-sm",type:"submit",variant:"secondary",disabled:!b,children:"Apply"})]}):Object(le.jsxs)(ce.a,{onSubmit:function(t){t.preventDefault(),f&&f!==s&&e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_PILLAR_WIDTH")({width:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(f)),y&&y!==o&&e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_PILLAR_THICKNESS")({thickness:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(y)),S&&S!==u&&e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_NECK_JOINT_WIDTH")({width:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(parseInt(S)))},children:[Object(le.jsxs)(ce.a.Group,{className:"mb-1",children:[Object(le.jsx)(ce.a.Label,{children:"Pillar Width"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:f,onChange:function(e){return g(e.target.value)}}),Object(le.jsx)(xe,{children:"mm"})]})]}),Object(le.jsxs)(ce.a.Group,{className:"mb-1",children:[Object(le.jsx)(ce.a.Label,{children:"Pillar Thickness"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:y,onChange:function(e){return v(e.target.value)}}),Object(le.jsx)(xe,{children:"mm"})]})]}),Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Neck Joint Width"}),Object(le.jsx)(ce.a.Range,{max:5,min:1,value:S,onChange:function(e){return N(e.target.value)}})]}),Object(le.jsx)(ie.a,{className:"btn-sm",type:"submit",variant:"secondary",children:"Apply"})]})]})},pe=Object(re.a)(ie.a)(g||(g=Object(V.a)(["\n  margin: 0 1rem 1rem 0;\n"]))),xe=Object(re.a)(be.a.Text)(p||(p=Object(V.a)(["\n  min-width: 70px;\n  display: inline-block;\n  text-align: center;\n"]))),ye=n(118),ve=n(112),ke=function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_NECK_STYLE")({style:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Te=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.string})),n=t.strings,a=t.stringSpacing,c=t.stringNumber,s=t.totalLoad,o=Object(i.c)((function(e){return e.neck})),u=o.neckThickness,d=o.tuningPinLength,h=o.frontNeckThickness,O=o.frontNeckTuningPostLength,m=o.backNeckThickness,f=o.backNeckTuningPostLength,g=o.neckStyle,p=Object(r.useState)(u),x=Object(ae.a)(p,2),y=x[0],v=x[1],k=Object(r.useState)(d),T=Object(ae.a)(k,2),S=T[0],N=T[1],P=Object(r.useState)(h),D=Object(ae.a)(P,2),A=D[0],C=D[1],M=Object(r.useState)(O),E=Object(ae.a)(M,2),w=E[0],L=E[1],_=Object(r.useState)(m),q=Object(ae.a)(_,2),I=q[0],B=q[1],G=Object(r.useState)(f),U=Object(ae.a)(G,2),R=U[0],W=U[1],H=Object(r.useMemo)((function(){var e=0;return Object(l.a)(n).reverse().forEach((function(t,n){n%2===0&&(e+=t.tension)})),e}),[n]),J=Object(r.useMemo)((function(){var e=0;return Object(l.a)(n).reverse().forEach((function(t,n){n%2===1&&(e+=t.tension)})),e}),[n]),K=Object(r.useMemo)((function(){return O/1e3*H*9.807-f/1e3*J*9.807}),[O,f,H,J]);return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h5",{children:"Neck"}),Object(le.jsx)(Ne,{variant:"Standard"===g?"primary":"secondary",onClick:function(){return"Standard"!==g&&e(ke("Standard"))},children:"Standard"}),Object(le.jsx)(Ne,{variant:"Paraguayan"===g?"primary":"secondary",onClick:function(){return"Paraguayan"!==g&&e(ke("Paraguayan"))},children:"Paraguayan"}),Object(le.jsxs)(ce.a,{onSubmit:function(t){var n,r;t.preventDefault(),"Standard"===g?(e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_NECK_THICKNESS")({thickness:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(parseFloat(y))),e((r=parseFloat(S),function(){var e=Object(ue.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Object(j.a)("UPDATE_TUNING_PIN_LENGTH")({length:r}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))):"Paraguayan"===g&&e((n={frontNeckThickness:A,frontNeckTuningPostLength:w,backNeckThickness:I,backNeckTuningPostLength:R},function(){var e=Object(ue.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Object(j.a)("UPDATE_PARAGUAYAN_PARAMS")({params:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:["Standard"===g&&Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("p",{children:["Tensile Stress:"," ",Object(le.jsx)("b",{children:(F((b(c+3,a)+20-(b(-4,a)-30))/.4/1e3,u/1e3,9.807*s)/1e6).toFixed(6)})," ","MPa"]}),Object(le.jsxs)("p",{children:["Torque: ",Object(le.jsx)("b",{children:(d/1e3*s*9.807).toFixed(6)})," N m"]}),Object(le.jsxs)(ce.a.Group,{className:"mb-1",children:[Object(le.jsx)(ce.a.Label,{children:"Neck Thickness"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:y,onChange:function(e){return v(e.target.value)}}),Object(le.jsx)(Se,{children:"mm"})]})]}),Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Tuning Pin Length"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:S,onChange:function(e){return N(e.target.value)}}),Object(le.jsx)(Se,{children:"mm"})]})]})]}),"Paraguayan"===g&&Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(ye.a,{placement:"right",overlay:Object(le.jsxs)(ve.a,{id:"torque-imbalance-tooltip",children:["Front neck torque is ",Math.abs(K).toFixed(6)," Nm"," ",K>0?"greater":"less"," than back neck torque"]}),children:Object(le.jsxs)(Pe,{children:["Torque Imbalance ",Object(le.jsx)("b",{children:K.toFixed(6)})," N m"]})}),Object(le.jsx)("p",{children:Object(le.jsx)("b",{children:"Front Neck"})}),Object(le.jsxs)("p",{children:["Tensile Stress:"," ",Object(le.jsx)("b",{children:(F((b(c+3,a)+20-(b(-4,a)-30))/.4/1e3,h/1e3,H/2*9.807)/1e6).toFixed(6)})," ","MPa"]}),Object(le.jsxs)(ce.a.Group,{className:"mb-1",children:[Object(le.jsx)(ce.a.Label,{children:"Neck Thickness"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:A,onChange:function(e){return C(e.target.value)}}),Object(le.jsx)(Se,{children:"mm"})]})]}),Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Tuning Post Length"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:w,onChange:function(e){return L(e.target.value)}}),Object(le.jsx)(Se,{children:"mm"})]})]}),Object(le.jsx)("p",{children:Object(le.jsx)("b",{children:"Back Neck"})}),Object(le.jsxs)("p",{children:["Tensile Stress:"," ",Object(le.jsx)("b",{children:(F((b(c+3,a)+20-(b(-4,a)-30))/.4/1e3,m/1e3,J/2*9.807)/1e6).toFixed(6)})," ","MPa"]}),Object(le.jsxs)(ce.a.Group,{className:"mb-1",children:[Object(le.jsx)(ce.a.Label,{children:"Neck Thickness"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:I,onChange:function(e){return B(e.target.value)}}),Object(le.jsx)(Se,{children:"mm"})]})]}),Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Tuning Post Length"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:R,onChange:function(e){return W(e.target.value)}}),Object(le.jsx)(Se,{children:"mm"})]})]})]}),Object(le.jsx)(ie.a,{className:"btn-sm",type:"submit",variant:"secondary",children:"Apply"})]})]})},Se=Object(re.a)(be.a.Text)(x||(x=Object(V.a)(["\n  min-width: 70px;\n  display: inline-block;\n  text-align: center;\n"]))),Ne=Object(re.a)(ie.a)(y||(y=Object(V.a)(["\n  margin: 0 1rem 1rem 0;\n"]))),Pe=re.a.span(v||(v=Object(V.a)(["\n  display: inline-block;\n  margin-bottom: 1rem;\n"]))),De=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.string})).tuning,n=function(t){e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_TUNING")({tuning:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))};return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h5",{children:"Tuning"}),Object(le.jsx)(Ae,{variant:"C Major"===t?"primary":"secondary",onClick:function(){return n("C Major")},children:"C Major"}),Object(le.jsx)(Ae,{variant:"E Flat Major"===t?"primary":"secondary",onClick:function(){return n("E Flat Major")},children:"E \u266d Major"}),Object(le.jsx)(Ae,{variant:"A Flat Major"===t?"primary":"secondary",onClick:function(){return n("A Flat Major")},children:"A \u266d Major"})]})},Ae=Object(re.a)(ie.a)(k||(k=Object(V.a)(["\n  margin-right: 1rem;\n  margin-bottom: 0.5rem;\n"]))),Ce=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.string})).materialDensity,n=Object(r.useState)(t),a=Object(ae.a)(n,2),c=a[0],s=a[1],o=function(t){e(function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_STRING_MATERIAL_DENSITY")({density:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))};return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("h5",{children:Object(le.jsx)(ye.a,{placement:"right",overlay:Object(le.jsx)(ve.a,{children:"This setting applies to all strings"}),children:Object(le.jsx)("span",{children:"String Material (global)"})})}),Object(le.jsx)(Me,{variant:1.14===c?"primary":1.14===t?"dark":"secondary",onClick:function(){return s(1.14)},children:"Nylon"}),Object(le.jsx)(Me,{variant:8.77===c?"primary":8.77===t?"dark":"secondary",onClick:function(){return s(8.77)},children:"Brass"}),Object(le.jsx)(Me,{variant:7.8===c?"primary":7.8===t?"dark":"secondary",onClick:function(){return s(7.8)},children:"Steel"}),Object(le.jsx)(Me,{variant:8.94===c?"primary":8.94===t?"dark":"secondary",onClick:function(){return s(8.94)},children:"Copper"}),Object(le.jsx)(Me,{variant:8.85===c?"primary":8.85===t?"dark":"secondary",onClick:function(){return s(8.85)},children:"Phosphor Bronze"}),Object(le.jsx)(Ee,{className:"btn-sm mt-2",variant:"secondary",onClick:function(){return o(c)},disabled:t===c,children:"Apply"})]})},Me=Object(re.a)(ie.a)(T||(T=Object(V.a)(["\n  margin-right: 1rem;\n  margin-bottom: 0.5rem;\n"]))),Ee=Object(re.a)(ie.a)(S||(S=Object(V.a)(["\n  display: block;\n"]))),we=[{name:"d\u2019Addario PB020 0.51mm",diameter:.51,linearMassDensity:.00145},{name:"d\u2019Addario PB021 0.53mm",diameter:.53,linearMassDensity:.0016},{name:"d\u2019Addario PB022 0.56mm",diameter:.56,linearMassDensity:.00176},{name:"d\u2019Addario PB023 0.58mm",diameter:.58,linearMassDensity:.00193},{name:"d\u2019Addario PB024 0.61mm",diameter:.61,linearMassDensity:.00209},{name:"d\u2019Addario PB025 0.64mm",diameter:.64,linearMassDensity:.00227},{name:"d\u2019Addario PB026 0.66mm",diameter:.66,linearMassDensity:.00244},{name:"d\u2019Addario PB027 0.69mm",diameter:.69,linearMassDensity:.00265},{name:"d\u2019Addario PB029 0.74mm",diameter:.74,linearMassDensity:.0031},{name:"d\u2019Addario PB030 0.76mm",diameter:.76,linearMassDensity:.00333},{name:"d\u2019Addario PB032 0.81mm",diameter:.81,linearMassDensity:.00375},{name:"d\u2019Addario PB034 0.86mm",diameter:.86,linearMassDensity:.00427},{name:"d\u2019Addario PB035 0.89mm",diameter:.89,linearMassDensity:.00453},{name:"d\u2019Addario PB036 0.91mm",diameter:.91,linearMassDensity:.00479},{name:"d\u2019Addario PB039 0.99mm",diameter:.99,linearMassDensity:.00556},{name:"d\u2019Addario PB042 1.07mm",diameter:1.07,linearMassDensity:.00656},{name:"d\u2019Addario PB045 1.14mm",diameter:1.14,linearMassDensity:.00746},{name:"d\u2019Addario PB047 1.19mm",diameter:1.19,linearMassDensity:.00809},{name:"d\u2019Addario PB049 1.24mm",diameter:1.24,linearMassDensity:.00878},{name:"d\u2019Addario PB052 1.32mm",diameter:1.32,linearMassDensity:.00986},{name:"d\u2019Addario PB053 1.35mm",diameter:1.35,linearMassDensity:.01017},{name:"d\u2019Addario PB056 1.42mm",diameter:1.42,linearMassDensity:.01134},{name:"d\u2019Addario PB059 1.50mm",diameter:1.5,linearMassDensity:.0126},{name:"d\u2019Addario PB060 1.52mm",diameter:1.52,linearMassDensity:.01304},{name:"d\u2019Addario PB062 1.57mm",diameter:1.57,linearMassDensity:.01387},{name:"d\u2019Addario PB064 1.63mm",diameter:1.63,linearMassDensity:.01478},{name:"d\u2019Addario PB066 1.68mm",diameter:1.68,linearMassDensity:.01566},{name:"d\u2019Addario PB070 1.78mm",diameter:1.78,linearMassDensity:.01729}],Le=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.string})).selectedString,n=Object(r.useState)(0),a=Object(ae.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(0),u=Object(ae.a)(o,2),l=u[0],b=u[1],h=Object(r.useState)(0),O=Object(ae.a)(h,2),m=O[0],f=O[1],g=Object(r.useState)(0),p=Object(ae.a)(g,2),x=p[0],y=p[1],v=Object(r.useState)(0),k=Object(ae.a)(v,2),T=k[0],S=k[1],N=Object(r.useState)(0),P=Object(ae.a)(N,2),D=P[0],A=P[1],C=Object(r.useState)(.00145),M=Object(ae.a)(C,2),E=M[0],w=M[1],_=Object(r.useState)("tension"),q=Object(ae.a)(_,2),I=q[0],F=q[1];Object(r.useEffect)((function(){t&&(s(t.frequency),b(t.length),f(t.diameter),y(t.tension),S(t.materialDensity),A(t.linearMassDensity))}),[t]);return t?Object(le.jsxs)(ce.a,{onSubmit:function(n){n.preventDefault();var r=parseFloat(c),a=parseFloat(l),i=parseFloat(m),s=parseFloat(x);switch(I){case"frequency":r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.14,a=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)||Math.pow(n/2,2)*Math.PI*r*1e3;return Math.sqrt(9.807*t/a)/(2*e)}(l/1e3,x,m/1e3,T,0===T?D:-1===T?E:0);break;case"length":a=1e3*function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.14,a=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:0)||Math.pow(n/2,2)*Math.PI*r*1e3;return Math.sqrt(9.807*t/a)/(2*e)}(c,x,m/1e3,T,0===T?D:-1===T?E:0);break;case"diameter":i=1e3*function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.14;return 2*Math.sqrt(9.807*n/(Math.pow(2*t*e,2)*(Math.PI*r*1e3)))}(c,l/1e3,x,T);break;case"tension":s=L(c,l/1e3,m/1e3,T,0===T?D:-1===T?E:0)}var o={frequency:r,length:a,diameter:i,tension:s,materialDensity:T};0===T&&(o=Object(d.a)(Object(d.a)({},o),{},{linearMassDensity:parseFloat(D)})),-1===T&&(o=Object(d.a)(Object(d.a)({},o),{},{linearMassDensity:E})),e(function(e,t){return function(){var n=Object(ue.a)(oe.a.mark((function n(r){return oe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r(Object(j.a)("UPDATE_STRING")({stringId:e,params:t}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t.id,o))},children:[Object(le.jsxs)("h5",{children:["String (",t.note,")"]}),Object(le.jsxs)(ce.a.Group,{className:"mb-1",children:[Object(le.jsx)(ce.a.Label,{children:"Frequency"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:c,onChange:function(e){return s(e.target.value)},disabled:"frequency"===I}),Object(le.jsx)(_e,{children:"Hz"}),Object(le.jsx)(qe,{children:Object(le.jsx)(ce.a.Check,{type:"radio",checked:"frequency"===I,onChange:function(){return F("frequency")},name:"stringinput"})})]})]}),Object(le.jsxs)(ce.a.Group,{className:"mb-1",children:[Object(le.jsx)(ce.a.Label,{children:"Length"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:l,onChange:function(e){return b(e.target.value)},disabled:"length"===I}),Object(le.jsx)(_e,{children:"mm"}),Object(le.jsx)(qe,{children:Object(le.jsx)(ce.a.Check,{type:"radio",checked:"length"===I,onChange:function(){return F("length")},name:"stringinput"})})]})]}),T>0&&Object(le.jsxs)(ce.a.Group,{className:"mb-1",children:[Object(le.jsx)(ce.a.Label,{children:"Diameter"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:m,onChange:function(e){return f(e.target.value)},disabled:"diameter"===I}),Object(le.jsx)(_e,{children:"mm"}),Object(le.jsx)(qe,{children:Object(le.jsx)(ce.a.Check,{type:"radio",checked:"diameter"===I,onChange:function(){return F("diameter")},name:"stringinput"})})]})]}),Object(le.jsxs)(ce.a.Group,{className:"mb-1",children:[Object(le.jsx)(ce.a.Label,{children:"Tension"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:x,onChange:function(e){return y(e.target.value)},disabled:"tension"===I}),Object(le.jsx)(_e,{children:"kg"}),Object(le.jsx)(qe,{children:Object(le.jsx)(ce.a.Check,{type:"radio",checked:"tension"===I,onChange:function(){return F("tension")},name:"stringinput"})})]})]}),Object(le.jsxs)(ce.a.Group,{className:0===T||-1===T?"mb-1":"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Material"}),Object(le.jsxs)(ce.a.Select,{value:T,onChange:function(e){"0"!==e.target.value&&"-1"!==e.target.value||"diameter"!==I||F("tension"),S(parseFloat(e.target.value))},children:[Object(le.jsx)("option",{value:1.14,children:"Nylon"}),Object(le.jsx)("option",{value:8.77,children:"Brass"}),Object(le.jsx)("option",{value:7.8,children:"Steel"}),Object(le.jsx)("option",{value:8.94,children:"Copper"}),Object(le.jsx)("option",{value:8.85,children:"Phosphor Bronze"}),Object(le.jsx)("option",{value:-1,children:"Phosphor Bronze Wound"}),Object(le.jsx)("option",{value:0,children:"Other"})]})]}),-1===T&&Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"String Gauge"}),Object(le.jsx)(ce.a.Select,{value:E,onChange:function(e){w(parseFloat(e.target.value))},children:we.map((function(e){return Object(le.jsx)("option",{value:e.linearMassDensity,children:e.name},e.diameter)}))})]}),0===T&&Object(le.jsxs)(ce.a.Group,{className:"mb-3",children:[Object(le.jsx)(ce.a.Label,{children:"Linear Mass Density (mass/length)"}),Object(le.jsxs)(be.a,{children:[Object(le.jsx)(ce.a.Control,{type:"number",value:D,onChange:function(e){return A(e.target.value)}}),Object(le.jsx)(_e,{children:"kg/m"})]})]}),Object(le.jsx)(ie.a,{className:"btn-sm",type:"submit",variant:"secondary",disabled:!((c||"frequency"===I)&&(l||"length"===I)&&(m||"diameter"===I)&&(x||"tension"===I)),children:"Apply"})]}):null},_e=Object(re.a)(be.a.Text)(N||(N=Object(V.a)(["\n  min-width: 70px;\n  display: inline-block;\n  text-align: center;\n"]))),qe=re.a.div(P||(P=Object(V.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0 10px;\n"]))),Ie=function(){return Object(le.jsxs)(Fe,{children:[Object(le.jsx)(Be,{children:Object(le.jsx)(de,{})}),Object(le.jsx)(Be,{children:Object(le.jsx)(Te,{})}),Object(le.jsx)(Be,{children:Object(le.jsx)(me,{})}),Object(le.jsx)(Be,{children:Object(le.jsx)(ge,{})}),Object(le.jsx)(Be,{children:Object(le.jsx)(Ce,{})}),Object(le.jsx)(Be,{children:Object(le.jsx)(De,{})}),Object(le.jsx)(Be,{children:Object(le.jsx)(Le,{})})]})},Fe=Object(re.a)($.a)(D||(D=Object(V.a)(["\n  max-height: 90vh;\n  overflow: auto;\n"]))),Be=re.a.div(A||(A=Object(V.a)(["\n  margin-bottom: 1.3rem;\n"]))),Ge=n(16),Ue=function(e){var t=e.start,n=e.end,a=e.dispatch,c=Object(r.useRef)(null),i=Object(r.useState)(n),s=Object(ae.a)(i,2),o=s[0],u=s[1];return Object(r.useEffect)((function(){a(he({x:c.current.x(),y:c.current.y()}))}),[c,a]),Object(r.useEffect)((function(){var e=.4*Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));a(Oe(e))}),[]),Object(r.useEffect)((function(){if(n.y!==o.y){var e=.4*Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));a(Oe(e)),a(he({x:c.current.x(),y:c.current.y()})),u(n)}}),[c,a,n]),Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ge.f,{stroke:"black",strokeWidth:5,lineJoin:"round",sceneFunc:function(e,r){var a,i;e.beginPath(),e.moveTo(t.x,t.y),e.quadraticCurveTo(null===(a=c.current)||void 0===a?void 0:a.x(),null===(i=c.current)||void 0===i?void 0:i.y(),n.x,n.y),e.lineTo(n.x,n.y+30),e.lineTo(t.x+100,t.y),e.closePath(),e.fillStrokeShape(r)}}),Object(le.jsx)(Ge.b,{ref:c,x:(t.x+n.x)/2,y:(t.y+n.y)/2,radius:20,stroke:"#666",fill:"#ddd",strokeWidth:2,draggable:!0,onMouseEnter:function(){document.body.style.cursor="pointer",this.strokeWidth(4)},onMouseLeave:function(){document.body.style.cursor="default",this.strokeWidth(2)},onDragMove:function(){this.x((t.x+n.x)/2)},onDragEnd:function(){a(he({x:this.x(),y:this.y()}))}})]})},Re=function(e){var t=e.start,n=e.end,r=e.dStart,a=e.dEnd,c=e.width,s=void 0===c?30:c;return"D Shape"===Object(i.c)((function(e){return e.pillar})).shape?Object(le.jsx)(Ge.f,{stroke:"black",strokeWidth:5,lineCap:"round",sceneFunc:function(e,c){e.beginPath(),e.moveTo(t.x,t.y),e.quadraticCurveTo((t.x+n.x)/2-100,(t.y+n.y)/2,n.x,n.y+50),e.moveTo(r.x,r.y),e.quadraticCurveTo((r.x+a.x)/2-100,(r.y+a.y)/2,a.x,a.y+15),e.fillStrokeShape(c)},className:"Pillar"}):Object(le.jsx)(Ge.e,{x:0,y:0,points:[t.x,t.y,n.x,n.y,n.x-s,n.y,t.x-s,t.y],stroke:"black",strokeWidth:5,closed:!0,lineJoin:"round",lineCap:"round",className:"Pillar"})},We=function(e){var t=e.start,n=e.end,r=e.yOffset,a=Object(i.c)((function(e){return e.string})),c=a.strings,s=a.defaultStringLengths,o=a.stringSpacing,u=a.stringNumber,d=Object(i.c)((function(e){return e.soundboard})).control,j=Object(i.c)((function(e){return e.pillar})).shape;return Object(le.jsx)(le.Fragment,{children:d&&Object(le.jsx)(le.Fragment,{children:Object(le.jsx)(Ge.e,{x:0,y:0,tension:.3,points:[t.x,"Straight"===j?t.y:t.y+50].concat(Object(l.a)(Ke(c,s,h(-4,r),d.y,n.y,o,-40,u)),[n.x,n.y-30,n.x+20,n.y,n.x,n.y+30,n.x,n.y],Object(l.a)(Je(c,s,h(-4,r),d.y,n.y,o,10,u)),[t.x,t.y+50]),stroke:"black",strokeWidth:5,lineCap:"round",className:"Neck"})})})},He=function(e,t,n,r,a,c,i){return e.map((function(e,s){var o=O((s+4)/(i+7),t,n,r);return[b(s,a),o-.4*e+c]}))},Je=function(e,t,n,r,a,c,i,s){var o=He(e.map((function(e){return e.length})),n,r,a,c,i,s),u=He(t,n,r,a,c,i,s),l=[];return o.forEach((function(n,r){var a=e[r].length-t[r];r%6===0&&a>-10?l.push(u[r]):(r%6===0||a<-10)&&l.push(n)})),l.reverse().flat()},Ke=function(e,t,n,r,a,c,i,s){var o=He(e.map((function(e){return e.length})),n,r,a,c,i,s),u=He(t,n,r,a,c,i,s),l=[];return o.forEach((function(n,r){var a=e[r].length-t[r];r%6===0&&a<50?l.push(u[r]):(r%6===0||a>50)&&l.push(n)})),l.flat()},Ye=function(e){var t=e.start,n=e.end,r=e.string,a=e.stroke,c=void 0===a?"white":a,s=Object(i.c)((function(e){return e.settings})).backgroundColor;return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ge.f,{stroke:"white"===s&&"white"===c?"silver":c,strokeWidth:3,lineCap:"round",string:r,sceneFunc:function(e,r){e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y-20),e.fillStrokeShape(r)}}),Object(le.jsx)(Ge.b,{x:n.x,y:n.y||0,stroke:"gray",radius:2,listening:!1}),Object(le.jsx)(Ge.b,{x:n.x,y:n.y-20||0,stroke:"gray",radius:3,listening:!1})]})},ze=function(e){var t=e.yOffset,n=Object(i.c)((function(e){return e.string})),a=n.strings,c=n.defaultStringLengths,s=n.stringSpacing,o=n.stringNumber,u=Object(i.c)((function(e){return e.soundboard})).control,l=Object(r.useMemo)((function(){var e=1e3;return a.forEach((function(n,r){var a=O((r+4)/(o+7),h(-4,t),null===u||void 0===u?void 0:u.y,h(o+3,t))-.4*n.length;a<e&&(e=a)})),e}),[a,t,u,o]);return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ge.a,{points:[b(-4,s)-90,(l+h(-4,t))/2-40,b(-4,s)-90,l-50],stroke:"blue"}),Object(le.jsx)(Ge.a,{points:[b(-4,s)-90,(l+h(-4,t))/2+20,b(-4,s)-90,h(-4,t)],stroke:"blue"}),Object(le.jsxs)(Ge.c,{x:b(-4,s)-90,y:(l+h(-4,t))/2-25,listening:!1,children:[Object(le.jsx)(Ge.h,{fill:"black",pointerDirection:"up",pointerWidth:0,pointerHeight:0,lineJoin:"round"}),Object(le.jsx)(Ge.i,{text:Math.round((h(-4,t)-(h(-4,t)-.48*c[0]))/.4*100)/100+" mm",fontSize:18,padding:5,fill:"white"})]}),Object(le.jsx)(Ge.a,{points:[b(-4,s)+b(-4,s)/2+50,l-80,b(o+3,s)+20,l-80],stroke:"blue"}),Object(le.jsx)(Ge.a,{points:[b(-4,s)+b(-4,s)/2-80,l-80,b(-4,s)-30,l-80],stroke:"blue"}),Object(le.jsxs)(Ge.c,{x:b(-4,s)+b(-4,s)/2+30,y:l-80,listening:!1,children:[Object(le.jsx)(Ge.h,{fill:"black",pointerDirection:"right",pointerWidth:0,pointerHeight:0,lineJoin:"round"}),Object(le.jsx)(Ge.i,{text:Math.round((b(o+3,s)+20-(b(-4,s)-30))/.4*100)/100+" mm",fontSize:18,padding:5,fill:"white"})]})]})},Xe=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.string})),n=t.strings,a=t.defaultStringLengths,c=t.stringSpacing,s=t.stringNumber,o=t.totalLoad,u=Object(i.c)((function(e){return e.soundboard})),d=u.angle,m=u.control,f=u.stringBandThickness,g=u.length,p=Object(i.c)((function(e){return e.pillar})),x=p.neckJointWidth,y=p.shape,v=p.pillarDiameter,k=p.pillarWidth,T=p.pillarThickness,S=Object(i.c)((function(e){return e.neck})),N=S.neckStyle,P=S.neckThickness,D=S.tuningPinLength,A=S.frontNeckThickness,C=S.backNeckThickness,M=S.frontNeckTuningPostLength,E=S.backNeckTuningPostLength,w=Object(r.useRef)(null),L=Object(r.useState)(Qe(d,c)),_=Object(ae.a)(L,2),q=_[0],I=_[1],U=Object(r.useMemo)((function(){var e=0;return Object(l.a)(n).reverse().forEach((function(t,n){n%2===0&&(e+=t.tension)})),e}),[n]),R=Object(r.useMemo)((function(){var e=0;return Object(l.a)(n).reverse().forEach((function(t,n){n%2===1&&(e+=t.tension)})),e}),[n]),W=Object(r.useMemo)((function(){return M/1e3*U*9.807-E/1e3*R*9.807}),[M,E,U,R]);return Object(r.useEffect)((function(){I(Qe(d,c))}),[d,c]),Object(le.jsx)(Ge.g,{width:.9*window.innerWidth,height:.9*window.innerHeight,offsetY:-250,children:Object(le.jsxs)(i.a,{store:Q,children:[Object(le.jsxs)(Ge.d,{onClick:function(e){w.current.position({x:e.evt.layerX,y:e.evt.layerY-5}),"Neck"===e.target.attrs.className?"Standard"===N?w.current.getText().text("Neck\n\nNeck Style: ".concat(N,"\nTensile Stress: ").concat((F((b(s+3,c)+20-(b(-4,c)-30))/.4/1e3,P/1e3,9.807*o)/1e6).toFixed(6)," MPa\nTorque: ").concat((D/1e3*o*9.807).toFixed(6)," N m\nNeck Thickness: ").concat(P," mm\nTuning Pin Length: ").concat(D," mm")):w.current.getText().text("Neck\n\nNeck Style: ".concat(N,"\nTorque Imbalance: ").concat(W.toFixed(6)," N m\n\nFront Neck\nTensile Stress: ").concat((F((b(s+3,c)+20-(b(-4,c)-30))/.4/1e3,A/1e3,U/2*9.807)/1e6).toFixed(6)," MPa\nNeck Thickness: ").concat(A," mm\nTuning Post Length: ").concat(M," mm\n\nBack Neck\nTensile Stress: ").concat((F((b(s+3,c)+20-(b(-4,c)-30))/.4/1e3,C/1e3,R/2*9.807)/1e6).toFixed(6)," MPa\nNeck Thickness: ").concat(C," mm\nTuning Post Length: ").concat(E," mm")):"Pillar"===e.target.attrs.className&&("Straight"===y?w.current.getText().text("Pillar\n\nCompresive Stress: ".concat((.6*o*9.807/B(v)/1e6).toFixed(6)," MPa\nPillar Diameter: ").concat(v," mm")):w.current.getText().text("Pillar\n\nCompresive Stress: ".concat((.6*o*9.807/G(k,T)/1e6).toFixed(6)," MPa\nPillar Width: ").concat(k," mm\nPillar Thickness: ").concat(T," mm"))),w.current.show()},onMouseOver:function(e){document.body.style.cursor="pointer",e.target.strokeWidth(7)},onMouseOut:function(e){document.body.style.cursor="default",e.target.strokeWidth(5),w.current.hide()},children:[Object(le.jsx)(Re,{start:{x:b(-4,c),y:h(-4,q)},end:{x:b(-4,c),y:h(-4,q)-.48*a[0]},dStart:{x:b(-2,c),y:O(2/(s+7),h(-4,q),null===m||void 0===m?void 0:m.y,h(s+3,q))},dEnd:{x:b(x,c),y:O((4+x)/(s+7),h(-4,q),null===m||void 0===m?void 0:m.y,h(s+3,q))-.4*n[x].length}}),Object(le.jsx)(We,{start:{x:b(-4,c),y:h(-4,q)-.48*a[0]},end:{x:b(s+3,c),y:h(s+3,q)},yOffset:q})]}),Object(le.jsx)(Ge.d,{onClick:function(t){var n;e((n=t.target.attrs.string.id,function(){var e=Object(ue.a)(oe.a.mark((function e(t){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Object(j.a)("SELECT_STRING")({stringId:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},onMouseOver:function(e){var t=e.target.attrs.string;document.body.style.cursor="pointer",e.target.strokeWidth(5),w.current.getText().text("Frequency: ".concat(t.frequency," Hz, Length: ").concat(t.length," mm, Diameter: ").concat(Number(t.diameter).toFixed(2)," mm, Tension: ").concat(t.tension.toFixed(2)," kg")),w.current.position({x:e.evt.layerX,y:e.evt.layerY-5}),w.current.show()},onMouseOut:function(e){document.body.style.cursor="default",e.target.strokeWidth(3),w.current.hide()},children:n.map((function(e,t){var n=O((t+4)/(s+7),h(-4,q),null===m||void 0===m?void 0:m.y,h(s+3,q));return Object(le.jsx)(Ye,{start:{x:b(t,c),y:n},end:{x:b(t,c),y:n-.4*e.length},string:e,stroke:"C"===e.note.charAt(0)&&2===e.note.length?"red":"F"===e.note.charAt(0)&&2===e.note.length?"blue":"white"},e.id)}))}),Object(le.jsx)(Ge.d,{onClick:function(e){w.current.position({x:e.evt.layerX,y:e.evt.layerY-5}),w.current.getText().text("Body\n\nSoundboard Angle: ".concat(d," degrees\nSoundboard Tensile Stress: ").concat((F(g/1e3,f/1e3,.5*o*9.807)/1e6).toFixed(6)," MPa\nString Band Thickness: ").concat(f," mm")),w.current.show()},onMouseOver:function(e){document.body.style.cursor="pointer",e.target.strokeWidth(7)},onMouseOut:function(e){document.body.style.cursor="default",e.target.strokeWidth(5),w.current.hide()},children:Object(le.jsx)(Ue,{start:{x:b(-4,c),y:h(-4,q)},end:{x:b(s+3,c),y:h(s+3,q)},dispatch:e})}),Object(le.jsxs)(Ge.d,{children:[Object(le.jsx)(ze,{yOffset:q}),Object(le.jsxs)(Ge.c,{opacity:.8,visible:!1,listening:!1,ref:w,offsetY:250,children:[Object(le.jsx)(Ge.h,{fill:"black",pointerDirection:"down",pointerWidth:10,pointerHeight:10,lineJoin:"round"}),Object(le.jsx)(Ge.i,{text:"",fontSize:18,padding:5,fill:"white"})]})]})]})})},Qe=function(e,t){var n=e*Math.PI/180;return t*Math.tan(n)},Ve=function(e){return function(){var t=Object(ue.a)(oe.a.mark((function t(n){return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(Object(j.a)("UPDATE_BACKGROUND_COLOR")({color:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};n(103),n(104);var Ze=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.settings})).backgroundColor;return Object(le.jsxs)($e,{className:"App",backgroundColor:t,children:[Object(le.jsx)(Z.a,{className:"mb-3",bg:"dark",variant:"dark",children:Object(le.jsxs)($.a,{children:[Object(le.jsx)(Z.a.Brand,{children:"Harp Designer"}),Object(le.jsxs)(ee.a,{title:Object(le.jsx)(et,{children:"Background Color"}),children:[Object(le.jsx)(tt,{onClick:function(){return e(Ve("burlywood"))},children:Object(le.jsx)(nt,{color:"burlywood"})}),Object(le.jsx)(tt,{onClick:function(){return e(Ve("white"))},children:Object(le.jsx)(nt,{color:"white"})})]})]})}),Object(le.jsxs)(te.a,{children:[Object(le.jsx)(ne.a,{md:3,children:Object(le.jsx)(Ie,{})}),Object(le.jsx)(ne.a,{md:9,children:Object(le.jsx)(Xe,{})})]})]})},$e=re.a.div(C||(C=Object(V.a)(["\n  background-color: ",";\n"])),(function(e){return e.backgroundColor})),et=re.a.span(M||(M=Object(V.a)(["\n  color: white;\n"]))),tt=Object(re.a)(ee.a.Item)(E||(E=Object(V.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),nt=re.a.div(w||(w=Object(V.a)(["\n  width: 22px;\n  height: 22px;\n  border: 2px solid;\n  border-radius: 3px;\n  background-color: ",";\n"])),(function(e){return e.color})),rt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};c.a.render(Object(le.jsx)(i.a,{store:Q,children:Object(le.jsx)(Ze,{})}),document.getElementById("root")),rt()}},[[105,1,2]]]);
//# sourceMappingURL=main.91697e33.chunk.js.map